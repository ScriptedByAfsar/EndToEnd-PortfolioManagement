<div class="goals-container">
  <h2>Goals Page</h2>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <p>Loading goals...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-state">
    <p>{{ error }}</p>
    <button (click)="loadGoals()" class="retry-btn">Retry</button>
  </div>

  <!-- Form -->
  <form *ngIf="!isLoading && !error" (ngSubmit)="onSubmit()" [formGroup]="goalsForm">
    <div *ngFor="let goal of goals" class="form-group">
      <label>
        <input type="checkbox" [formControlName]="goal.goalname" />
        {{ goal.goalname }}
      </label>
      <input 
        *ngIf="goalsForm.get(goal.goalname)?.value" 
        type="number" 
        class="form-control" 
        placeholder="Amount" 
        [formControlName]="goal.amountControl"
        [attr.disabled]="isSaving ? '' : null" />
    </div>
    <div class="actions">
      <button type="button" class="back-button" (click)="router.navigate(['/main'])">Back to Main Page</button>
      <button type="submit" class="btn btn-primary" [disabled]="isLoading || isSaving">
        {{ isSaving ? 'Saving...' : 'Finish' }}
      </button>
    </div>
  </form>
</div>
